# Telegram AI Bot (Gemini + Multimedia)

–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `aiogram`, Google Gemini, SQLite –∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **ü§ñ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Google Gemini (`gemini-1.5-pro`), —É—á—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Å–æ–æ–±—â–µ–Ω–∏–π.
*   **üó£Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–∞:** –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫) –∏–∑ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`speech_recognition` + Google Speech API) –∏ –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Gemini.
*   **üñºÔ∏è –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR Tesseract: ru+en) –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (Gemini Vision).
*   **üìÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤:** –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ `.txt`, `.pdf`, `.csv`, `.xlsx` —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Gemini.
*   **‚òÄÔ∏è –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –ø–æ –∫–æ–º–∞–Ω–¥–µ `/weather <–≥–æ—Ä–æ–¥>` (OpenWeatherMap API).
*   **üé≠ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Å—Ç–∏–ª—å:** –í—ã–±–æ—Ä —Å—Ç–∏–ª—è –æ–±—â–µ–Ω–∏—è (–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π) —á–µ—Ä–µ–∑ `/mood`.
*   **üîä –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (`gTTS`), –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –æ–∑–≤—É—á–∫–∏ (`/toggle_speak`), —Ä–∞–∑–æ–≤–æ–µ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ (`/speak <—Ç–µ–∫—Å—Ç>`).
*   **üåê –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞:** –ü–µ—Ä–µ–≤–æ–¥ —Å –ø–æ–º–æ—â—å—é `googletrans` (—Å fallback –Ω–∞ Gemini) –ø–æ –∫–æ–º–∞–Ω–¥–µ `/translate <—Ç–µ–∫—Å—Ç> [—è–∑—ã–∫]`.
*   **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–ø–∏—Å–æ–∫ ID –≤ `.env`).
*   **üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ó–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏–π –∏ –æ—à–∏–±–æ–∫ –≤ `bot.log` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π.
*   **üíæ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∏—Å–∫–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (—Ü–µ–ª—å < 9 –ì–ë –æ–±—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   Python 3.11
*   aiogram 3.x
*   Google Gemini API (Generative AI)
*   SQLite (aiosqlite)
*   OpenWeatherMap API
*   Tesseract OCR
*   SpeechRecognition (Google Speech API)
*   gTTS (Google Text-to-Speech)
*   googletrans
*   Pandas, OpenPyXL, PyPDF2
*   Loguru
*   Pydub (—Ç—Ä–µ–±—É–µ—Ç ffmpeg)
*   python-dotenv

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Ubuntu 24.04

**1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```bash
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.11 (–º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) –∏ pip
sudo apt install -y python3.11 python3.11-venv python3-pip git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tesseract OCR —Å —Ä—É—Å—Å–∫–∏–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–º —è–∑—ã–∫–∞–º–∏
sudo apt install -y tesseract-ocr tesseract-ocr-rus tesseract-ocr-eng

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ffmpeg (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ - pydub)
sudo apt install -y ffmpeg

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PortAudio (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–ª—è SpeechRecognition, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Google API)
# sudo apt install -y portaudio19-dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Tesseract
tesseract --version
tesseract --list-langs | grep -E 'rus|eng' # –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å rus –∏ eng